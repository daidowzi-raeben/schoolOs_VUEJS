(window.webpackJsonp = window.webpackJsonp || []).push([[38], { 394: function (t, e, n) { "use strict"; n.d(e, "a", (function () { return l })); n(40); var l = function () { console.log("hitoryBackhitoryBackhitoryBack") } }, 450: function (t, e, n) { "use strict"; n.r(e); n(51), n(43), n(50), n(23), n(67), n(44), n(68); var l = n(27), _ = (n(41), n(60), n(45)), o = n(394); function c(object, t) { var e = Object.keys(object); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(object); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(object, t).enumerable }))), e.push.apply(e, n) } return e } function r(t) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? c(Object(source), !0).forEach((function (e) { Object(l.a)(t, e, source[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(source)) : c(Object(source)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(source, e)) })) } return t } var d = { name: "TodoDetail", validate: function (t) { var e = t.params; return /^\d+$/.test(e.id) }, asyncData: function (t) { var e = t.params; return console.log(e), { idx: e.id } }, data: function () { return { params: {}, paramsPost: {}, paramsPostApply: {}, a: 1e8, completeContent: "", slide: 0, sliding: null, btn: { onSubmitApply: !1, onSubmitComplete: !1 } } }, computed: r(r({}, Object(_.f)(["LOGIN", "LOADING"])), Object(_.d)(["GET_AXIOS_CALLBACK_GETTER", "LOGIN_STUDENT"])), beforeCreate: function () { }, mounted: function () { console.log(this.$nuxt, this.$config), this.params = this.LOGIN_STUDENT, this.params.type = "questView", this.params.idx = this.idx, this.GET_AXIOS(this.params), Object(o.a)() }, methods: r(r(r({}, Object(_.c)(["POST_AXIOS", "GET_AXIOS", "POST_AXIOS_FORM"])), Object(_.e)(["LOADING_TRUE"])), {}, { onSlideStart: function (t) { this.sliding = !0 }, onSlideEnd: function (t) { this.sliding = !1 }, onSubmitApply: function () { var t = this; this.btn.onSubmitApply = !0, this.LOADING_TRUE(); var e = new FormData; e.append("type", "questApply"), e.append("idx", this.idx), e.append("sms_idx", this.LOGIN_STUDENT.sms_idx), this.$axios.post("http://localhost:3095/student.php", e).then((function (e) { t.params = t.LOGIN_STUDENT, t.params.type = "questView", t.params.idx = t.idx, t.GET_AXIOS(t.params), t.btn.onSubmitApply = !1 })).catch((function (e) { console.log("AXIOS FALSE", e), t.LOADING = !1 })) }, onClickCompleteModal: function () { this.completeContent = "", this.$bvModal.hide("completeFile") }, onSubmitComplete: function () { var t = this; this.btn.onSubmitComplete = !0; var e = new FormData, n = document.getElementById("photo"); if (0 === n.files.length) { if (!confirm("인증샷이 등록되지 않았어요\n인증샷 없이 선생님에게 제출할까요?")) return; console.log("OK") } console.log(n.files); for (var i = 0; i < n.files.length; i++)e.append("photo[".concat(i, "]"), n.files[i]); e.append("type", "questCopleteOn"), e.append("idx", this.params.idx), this.completeContent && e.append("content", this.completeContent), e.append("sms_idx", this.params.sms_idx), e.append("smt_idx", this.LOGIN_STUDENT.smt_idx), console.log(e), this.LOADING_TRUE(), this.$axios.post("http://localhost:3095/student.php", e, { header: { "Context-Type": "multipart/form-data" } }).then((function (e) { console.log("[onSubmitComplete]", e.data), t.$bvModal.hide("completeFile"), setTimeout((function () { t.params = t.LOGIN_STUDENT, t.params.type = "questView", t.params.idx = t.idx, t.GET_AXIOS(t.params), t.btn.onSubmitComplete = !1 })) })).catch((function (t) { console.log("AXIOS FALSE", t) })) } }) }, v = n(59), component = Object(v.a)(d, (function () { var t = this, e = t.$createElement, l = t._self._c || e; return l("div", { attrs: { id: "school-content" } }, [t.LOADING ? l("div", { attrs: { id: "LOADING" } }, [l("img", { attrs: { src: n(276) } })]) : t._e(), t._v(" "), l("div", { staticClass: "historyBack m-l-3 m-b-5" }, [l("b-icon", { attrs: { icon: "arrow-left", onclick: "history.back()" } })], 1), t._v(" "), l("div", { staticClass: "content" }, [l("div", { staticClass: "m-t-1 h60" }, [t.GET_AXIOS_CALLBACK_GETTER.view ? l("div", { staticClass: "account" }, [t.GET_AXIOS_CALLBACK_GETTER.view.subject ? l("div", { staticClass: "quest__content m-t-3" }, [l("div", { staticClass: "box quest m-b-3" }, [l("div", { staticClass: "flex" }, [l("div", { staticClass: "label blue" }, [t._v("\n                " + t._s(t.GET_AXIOS_CALLBACK_GETTER.view.cate_subject) + "\n              ")]), t._v(" "), l("div", { staticClass: "flex-full m-l-3 m-r-3" }, [l("div", { staticClass: "flex m-t-0" }, [l("div", { staticClass: "txt" }, [l("p", { staticClass: "bold" }, [t._v("\n                      " + t._s(t.GET_AXIOS_CALLBACK_GETTER.view.subject) + "\n                    ")]), t._v(" "), l("span", [t._v(t._s(t._f("moment")(t.GET_AXIOS_CALLBACK_GETTER.view.start_day, "YY.MM.DD")) + "\n                      ~\n                      " + t._s(t._f("moment")(t.GET_AXIOS_CALLBACK_GETTER.view.end_day, "YY.MM.DD")))])]), t._v(" "), l("div", { staticClass: "pay text-right flex-right" })]), t._v(" "), l("h4", { staticClass: "m-t-5 font-14" }, [t._v("성공하면 보상을 받을 수 있어요")]), t._v(" "), l("div", { staticClass: "m-t-2 flex flex-full" }, [l("div", [t._v("\n                    보상\n                    "), l("strong", { staticClass: "bold font-18 m-l-1" }, [l("em", [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.price))])]), t._v(" "), t.LOGIN_STUDENT.t_reg_pay_unit ? l("span", [t._v(t._s(t.LOGIN_STUDENT.t_reg_pay_unit))]) : t._e()]), t._v(" "), l("div", { staticClass: "flex-right" }, [l("div", { staticClass: "flex m-t-0" }, [l("span", { staticClass: "\n                          jelly-point\n                          m-t-0\n                          jelly-background--type1\n                          m-l-1\n                        " }, [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.intellect))]), t._v(" "), l("span", { staticClass: "\n                          jelly-point\n                          m-t-0\n                          jelly-background--type2\n                          m-l-1\n                        " }, [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.effort))]), t._v(" "), l("span", { staticClass: "\n                          jelly-point\n                          m-t-0\n                          jelly-background--type3\n                          m-l-1\n                        " }, [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.health))]), t._v(" "), l("span", { staticClass: "\n                          jelly-point\n                          m-t-0\n                          jelly-background--type4\n                          m-l-1\n                        " }, [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.etiquette))])])])]), t._v(" "), "0" != t.GET_AXIOS_CALLBACK_GETTER.view.m_price || "0" != t.GET_AXIOS_CALLBACK_GETTER.view.m_intellect || "0" != t.GET_AXIOS_CALLBACK_GETTER.view.m_effort || "0" != t.GET_AXIOS_CALLBACK_GETTER.view.m_health || "0" != t.GET_AXIOS_CALLBACK_GETTER.view.m_etiquette ? l("div", [l("h4", { staticClass: "m-t-3 p-t-3 font-14", staticStyle: { "border-top": "1px solid #f1f1f1" } }, [t._v("\n                    실패하면 패널티가 적용되요\n                  ")]), t._v(" "), l("div", { staticClass: "m-t-2 flex flex-full" }, [l("div", [t._v("\n                      패널티\n                      "), l("strong", { staticClass: "bold font-18 m-l-1" }, [l("em", [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.m_price))])]), t._v(" "), t.LOGIN_STUDENT.t_reg_pay_unit ? l("span", [t._v(t._s(t.LOGIN_STUDENT.t_reg_pay_unit))]) : t._e()]), t._v(" "), l("div", { staticClass: "flex-right" }, [l("div", { staticClass: "flex m-t-0" }, [l("span", { staticClass: "\n                            jelly-point\n                            m-t-0\n                            jelly-background--type1\n                            m-l-1\n                          " }, [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.m_intellect))]), t._v(" "), l("span", { staticClass: "\n                            jelly-point\n                            m-t-0\n                            jelly-background--type2\n                            m-l-1\n                          " }, [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.m_effort))]), t._v(" "), l("span", { staticClass: "\n                            jelly-point\n                            m-t-0\n                            jelly-background--type3\n                            m-l-1\n                          " }, [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.m_health))]), t._v(" "), l("span", { staticClass: "\n                            jelly-point\n                            m-t-0\n                            jelly-background--type4\n                            m-l-1\n                          " }, [t._v(t._s(t.GET_AXIOS_CALLBACK_GETTER.view.m_etiquette))])])])])]) : t._e()])])]), t._v(" "), t.GET_AXIOS_CALLBACK_GETTER.view.contents ? l("div", { staticClass: "m-l-3 m-r-3 img-full m-t-5", staticStyle: { "background-color": "#f2f3f5", padding: "10px", "border-radius": "10px", "white-space": "pre-line" }, domProps: { innerHTML: t._s(t.GET_AXIOS_CALLBACK_GETTER.view.contents) } }) : t._e(), t._v(" "), l("div", { staticClass: "m-t-5 flex p-3" }, [l("button", { staticClass: "jelly-btn jelly-btn--default wd-full m-r-1", attrs: { disabled: !t.GET_AXIOS_CALLBACK_GETTER.content }, on: { click: function (e) { return t.$bvModal.show("myContent") } } }, [t._v("\n              내가 남긴 말\n            ")]), t._v(" "), l("button", { staticClass: "jelly-btn jelly-btn--default wd-full m-l-1", attrs: { disabled: !t.GET_AXIOS_CALLBACK_GETTER.files }, on: { click: function (e) { return t.$bvModal.show("myFiles") } } }, [t._v("\n              나의 인증샷\n            ")])])]) : t._e()]) : t._e()])]), t._v(" "), t.GET_AXIOS_CALLBACK_GETTER.view && "END" === t.GET_AXIOS_CALLBACK_GETTER.view.is_end ? l("div", { staticClass: "quest-fixed" }, [l("button", { staticClass: "jelly-btn jelly-btn--gray" }, [t._v("기간이 종료되었습니다.")])]) : t._e(), t._v(" "), t.GET_AXIOS_CALLBACK_GETTER.view && "END" !== t.GET_AXIOS_CALLBACK_GETTER.view.is_end ? l("div", { staticClass: "quest-fixed flex" }, [t.GET_AXIOS_CALLBACK_GETTER.view.is_apply || t.GET_AXIOS_CALLBACK_GETTER.view.is_complete || t.GET_AXIOS_CALLBACK_GETTER.view.is_confirm ? t._e() : l("button", { staticClass: "jelly-btn jelly-btn--pink", attrs: { disabled: t.btn.onSubmitApply }, on: { click: t.onSubmitApply } }, [t._v("\n      수락하기\n    ")]), t._v(" "), !t.GET_AXIOS_CALLBACK_GETTER.view.is_apply || t.GET_AXIOS_CALLBACK_GETTER.view.is_complete || t.GET_AXIOS_CALLBACK_GETTER.view.is_confirm || "1" === t.GET_AXIOS_CALLBACK_GETTER.view.mandatory ? t._e() : l("button", { staticClass: "jelly-btn jelly-btn--default", staticStyle: { width: "30%" }, on: { click: t.onSubmitApply } }, [t._v("\n      취소하기\n    ")]), t._v(" "), !t.GET_AXIOS_CALLBACK_GETTER.view.is_apply || t.GET_AXIOS_CALLBACK_GETTER.view.is_complete || t.GET_AXIOS_CALLBACK_GETTER.view.is_confirm ? t._e() : l("button", { staticClass: "jelly-btn jelly-btn--pink", on: { click: function (e) { return t.$bvModal.show("completeFile") } } }, [t._v("\n      제출하기\n    ")]), t._v(" "), t.GET_AXIOS_CALLBACK_GETTER.view.is_apply || !t.GET_AXIOS_CALLBACK_GETTER.view.is_complete || t.GET_AXIOS_CALLBACK_GETTER.view.is_confirm ? t._e() : l("button", { staticClass: "jelly-btn jelly-btn--default" }, [t._v("\n      선생님이 검사중이에요!\n    ")]), t._v(" "), t.GET_AXIOS_CALLBACK_GETTER.view.is_confirm ? l("button", { staticClass: "jelly-btn jelly-btn--blue" }, [t._v("\n      보상지급완료\n    ")]) : t._e()]) : t._e(), t._v(" "), l("b-modal", { attrs: { id: "completeFile", size: "lg", "hide-footer": "", "hide-header": "" } }, [l("div", [l("p", [t._v("선생님께 남길 말이 있나요?")]), t._v(" "), l("textarea", { directives: [{ name: "model", rawName: "v-model", value: t.completeContent, expression: "completeContent" }], staticClass: "jelly-text wd-full", staticStyle: { height: "200px", padding: "10px" }, domProps: { value: t.completeContent }, on: { input: function (e) { e.target.composing || (t.completeContent = e.target.value) } } })]), t._v(" "), l("div", { staticClass: "m-t-5" }, [l("p", [t._v("인증샷을 등록해 주세요!")]), t._v(" "), l("input", { staticClass: "wd-full jelly-text jelly-text--h", attrs: { id: "photo", type: "file", name: "photo", multiple: "" } })]), t._v(" "), l("div", { staticClass: "m-t-5 flex" }, [l("button", { staticClass: "jelly-btn jelly-btn--default", staticStyle: { width: "30%", "border-radius": "0" }, on: { click: t.onClickCompleteModal } }, [t._v("\n        취소하기\n      ")]), t._v(" "), l("button", { staticClass: "jelly-btn jelly-btn--pink flex-full", staticStyle: { "border-radius": "0" }, on: { click: function (e) { return t.onSubmitComplete() } } }, [t._v("\n        완료하기\n      ")])])]), t._v(" "), l("b-modal", { attrs: { id: "myContent", size: "lg", "hide-footer": "", "hide-header": "" } }, [l("div", [l("p", [t._v("내가 남길 말")])]), t._v(" "), t.GET_AXIOS_CALLBACK_GETTER.content ? l("div", { staticClass: "m-t-5" }, [t._v("\n      " + t._s(t.GET_AXIOS_CALLBACK_GETTER.content.content) + "\n    ")]) : t._e(), t._v(" "), l("div", { staticClass: "m-t-5 text-center" }, [l("button", { staticClass: "jelly-btn jelly-btn--default", staticStyle: { width: "30%", "border-radius": "0" }, on: { click: function (e) { return t.$bvModal.hide("myContent") } } }, [t._v("\n        닫기\n      ")])])]), t._v(" "), l("b-modal", { attrs: { id: "myFiles", size: "lg", "hide-footer": "", "hide-header": "" } }, [l("div", { staticClass: "m-t-5" }, [t.GET_AXIOS_CALLBACK_GETTER.files ? l("div", [l("b-carousel", { staticStyle: { "text-shadow": "1px 1px 2px #333" }, attrs: { id: "carousel-1", interval: 4e3, controls: "", indicators: "", background: "#ababab", "img-width": "1024", "img-height": "480" }, on: { "sliding-start": t.onSlideStart, "sliding-end": t.onSlideEnd }, model: { value: t.slide, callback: function (e) { t.slide = e }, expression: "slide" } }, t._l(t.GET_AXIOS_CALLBACK_GETTER.files, (function (t, i) { return l("b-carousel-slide", { key: i, attrs: { "img-src": "https://api.school-os.net/data/student/quest/" + t.file_name } }) })), 1)], 1) : t._e()]), t._v(" "), l("div", { staticClass: "m-t-5 text-center" }, [l("button", { staticClass: "jelly-btn jelly-btn--default", staticStyle: { width: "30%", "border-radius": "0" }, on: { click: function (e) { return t.$bvModal.hide("myFiles") } } }, [t._v("\n        닫기\n      ")])])])], 1) }), [], !1, null, null, null); e.default = component.exports } }]);