(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{423:function(t,e,n){"use strict";n.r(e);n(51),n(43),n(50),n(23),n(67),n(44),n(68);var o=n(27),l=(n(60),n(45));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function r(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={data:function(){return{cnt:0,lottoNumber:[],LOGIN_CONFIG:{},params:{},lottoView:!1,randNumber:[],LOADING:!0,lottoIdx:"",enterResult:[],isBuy:!1,nextDate:"",firstLotto:!1,eventCnt:0,randNum:0}},mounted:function(){var t=this;this.LOADING_TRUE(),this.LOGIN_CONFIG=JSON.parse(localStorage.getItem("STUDENT")),this.randNum=Math.floor(30*Math.random()),this.nextDate="",console.log(this.$nuxt,this.$config,this.LOGIN_CONFIG),this.params=this.LOGIN_CONFIG;var e=new FormData;e.append("mode","enter"),e.append("sms_idx",this.LOGIN_CONFIG.sms_idx),e.append("smt_idx",this.LOGIN_CONFIG.smt_idx),this.$axios.post("http://localhost:3095/lotto.php",e).then((function(e){e.data.result?(t.lottoIdx=e.data.result.idx,t.lottoView=!0,t.enterResult=e.data.result,t.enterResult.th=e.data.query,e.data.myNumbers&&(t.nextDate=e.data.next,t.isBuy=!0,t.$nextTick((function(){t.lottoNumber=[],console.log(e.data.myNumbers.num1),t.lottoNumber.push(e.data.myNumbers.num1),t.lottoNumber.push(e.data.myNumbers.num2),t.lottoNumber.push(e.data.myNumbers.num3),t.lottoNumber.push(e.data.myNumbers.num4),t.lottoNumber.push(e.data.myNumbers.num5),t.$refs["checkbox".concat(e.data.myNumbers.num1)][0].parentElement.classList.toggle("is_active"),t.$refs["checkbox".concat(e.data.myNumbers.num1)][0].checked=!0,t.$refs["checkbox".concat(e.data.myNumbers.num2)][0].parentElement.classList.toggle("is_active"),t.$refs["checkbox".concat(e.data.myNumbers.num2)][0].checked=!0,t.$refs["checkbox".concat(e.data.myNumbers.num3)][0].parentElement.classList.toggle("is_active"),t.$refs["checkbox".concat(e.data.myNumbers.num3)][0].checked=!0,t.$refs["checkbox".concat(e.data.myNumbers.num4)][0].parentElement.classList.toggle("is_active"),t.$refs["checkbox".concat(e.data.myNumbers.num4)][0].checked=!0,t.$refs["checkbox".concat(e.data.myNumbers.num5)][0].parentElement.classList.toggle("is_active"),t.$refs["checkbox".concat(e.data.myNumbers.num5)][0].checked=!0})))):t.firstLotto=!0,console.log(e.data),t.LOADING=!1})).catch((function(e){console.log("AXIOS FALSE",e),t.LOADING=!1}))},methods:r(r({},Object(l.e)(["LOADING_INIT","LOADING_TRUE"])),{},{onClickToggleClass:function(t,e){if(console.log(this.randNum),e===this.randNum&&(this.eventCnt++,1===this.eventCnt&&(console.log("BOM"),this.jellyAnimation())),console.log(this.eventCnt),!0===t.target.checked&&this.cnt>=5)return t.target.checked=!1,alert("stop");if(!0===t.target.checked)this.cnt++,this.lottoNumber.push(e);else{this.cnt--;var n=this.lottoNumber;this.lottoNumber=[];for(var o=0;o<n.length;o++)e!==n[o]&&this.lottoNumber.push(n[o])}t.target.parentElement.classList.toggle("is_active"),console.log(this.cnt,this.lottoNumber)},onClickRandNumber:function(){var t=this;this.LOADING_TRUE(),this.LOADING=!0;var e=new FormData;e.append("mode","rand"),e.append("sms_idx",this.LOGIN_CONFIG.sms_idx),e.append("smt_idx",this.LOGIN_CONFIG.smt_idx),this.$axios.post("http://localhost:3095/lotto.php",e).then((function(e){console.log(e);for(var n=t.lottoNumber,o=0;o<n.length;o++)t.$refs["checkbox".concat(t.lottoNumber[o])][0].parentElement.classList.toggle("is_active"),t.$refs["checkbox".concat(t.lottoNumber[o])][0].checked=!1;t.cnt=0,t.lottoNumber=[];for(var i=0;i<5;i++)t.lottoNumber.push(e.data.result[i]),t.$refs["checkbox".concat(e.data.result[i])][0].parentElement.classList.toggle("is_active"),t.$refs["checkbox".concat(e.data.result[i])][0].checked=!0;t.cnt=5,console.log(t.lottoNumber),t.LOADING=!1})).catch((function(e){console.log("AXIOS FALSE",e),t.LOADING=!1}))},jellyAnimation:function(){var t=this;this.$lottie.loadAnimation({container:this.$refs.animationElementJelly,loop:!1,autoplay:!0,path:"/img/jelly.json"}),setTimeout((function(){t.$refs.animationElementJelly.style.display="none"}),2e3)},onSubmit:function(){var t=this;if(5===this.lottoNumber.length&&5===this.cnt){if(confirm("구매할까요?")){console.log("SUCCESS",this.cnt,this.lottoNumber),this.LOADING=!0;var e=new FormData;e.append("mode","buy"),e.append("numbers",this.lottoNumber),e.append("sms_idx",this.LOGIN_CONFIG.sms_idx),e.append("smt_idx",this.LOGIN_CONFIG.smt_idx),e.append("sl_idx",this.lottoIdx),e.append("pay",this.enterResult.pay),this.$axios.post("http://localhost:3095/lotto.php",e).then((function(e){if(console.log(e.data),"FALSE"===e.data.success)return console.log(e),alert("구매금액이 부족해요"),void(t.LOADING=!1);t.isBuy=!0,t.LOADING=!1,alert("젤리복권을 구매했어요. 당첨자 발표는 ".concat(t.enterResult.end_day," 입니다."))})).catch((function(e){console.log("AXIOS FALSE",e),t.LOADING=!1}))}}else alert("5개의 번호가 모두 선택되어야 해요.")}})},d=n(59),component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"school-content"}},[t.LOADING?o("div",{attrs:{id:"LOADING"}},[o("img",{attrs:{src:n(276)}})]):t._e(),t._v(" "),o("div",{staticClass:"historyBack m-l-3 m-b-5 flex"},[o("b-icon",{attrs:{icon:"arrow-left",onclick:"history.back()"}}),t._v(" "),o("nuxt-link",{staticClass:"flex-right",staticStyle:{"margin-top":"-10px"},attrs:{to:"/lottery-winning"}},[o("span",{staticClass:"jelly-point jelly-background--type4 font-12 m-r-3",staticStyle:{padding:"6px 8px"}},[t._v("\n        당첨 내역\n      ")])])],1),t._v(" "),t.lottoView?o("div",[o("div",{staticClass:"p-l-3 p-r-3 text-center"},[t._v("\n      젤리복권 "+t._s(t.enterResult.th)+"회차\n      "),o("div",{staticClass:"font-14"},[t._v("\n        구매가격 : "+t._s(t._f("comma")(t.enterResult.pay))+"\n        "),t.LOGIN_CONFIG.t_reg_pay_unit?o("span",[t._v(t._s(t.LOGIN_CONFIG.t_reg_pay_unit))]):t._e(),t._v(" "),!1===t.isBuy?o("span",{staticClass:"jelly-point m-t-0 jelly-background--type3 m-l-2 font-12"},[t._v("구매가능")]):t._e(),t._v(" "),!0===t.isBuy?o("span",{staticClass:"jelly-point m-t-0 jelly-background--type1 m-l-2 font-12"},[t._v("구매불가")]):t._e()]),t._v(" "),!1===t.isBuy?o("div",{staticClass:"p-l-3 p-r-3 font-12 m-t-2"},[t._v("\n        구매가능일 "+t._s(t.enterResult.start_day)+" ~ "+t._s(t.enterResult.end_day)+"\n      ")]):t._e(),t._v(" "),""!==t.nextDate?o("div",{staticClass:"p-l-3 p-r-3 font-12 m-t-2"},[o("div",[t._v("당첨자 발표 "+t._s(t.enterResult.end_day))]),t._v(" "),o("div",[t._v("다음 구매 가능 일 "+t._s(t.nextDate))])]):t._e()]),t._v(" "),o("div",{ref:"animationElementJelly",staticStyle:{position:"absolute","z-index":"1",width:"130%",left:"0"}}),t._v(" "),o("div",{staticClass:"clb p-3",attrs:{id:"lotto"}},t._l(30,(function(e){return o("div",{key:e,staticClass:"number"},[o("input",{ref:"checkbox"+e,refInFor:!0,staticStyle:{position:"absolute",width:"100%",height:"100%",top:"0",left:"0",opacity:"0"},attrs:{type:"checkbox"},domProps:{value:e},on:{click:function(n){return t.onClickToggleClass(n,e)}}}),t._v("\n\n        "+t._s(e)+"\n      ")])})),0),t._v(" "),!1===t.isBuy?o("div",{staticClass:"text-center flex m-l-3 m-r-3"},[o("button",{staticClass:"jelly-btn flex-full jelly-btn--default",on:{click:t.onClickRandNumber}},[t._v("\n        번호 자동선택\n      ")]),t._v(" "),o("button",{staticClass:"jelly-btn flex-full jelly-btn--pink m-l-2",on:{click:t.onSubmit}},[t._v("\n        구매하기\n      ")])]):t._e()]):o("div",[!0===t.firstLotto?o("div",{staticClass:"text-center"},[t._v("\n      다음주 월요일 9시부터 "),o("br"),t._v("\n      젤리복권을 구매할 수 있어요.\n    ")]):t._e()])])}),[],!1,null,null,null);e.default=component.exports}}]);