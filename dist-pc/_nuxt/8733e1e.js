(window.webpackJsonp = window.webpackJsonp || []).push([[31], { 445: function (t, e, n) { "use strict"; n.r(e); n(53), n(45), n(52), n(23), n(69), n(44), n(70); var l = n(29), o = (n(75), n(41), n(71), n(54)); function c(object, t) { var e = Object.keys(object); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(object); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(object, t).enumerable }))), e.push.apply(e, n) } return e } function r(t) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? c(Object(source), !0).forEach((function (e) { Object(l.a)(t, e, source[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(source)) : c(Object(source)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(source, e)) })) } return t } var _ = { layout: "default-pc", data: function () { return { params: { type: "sueList" }, paramsForm: {}, paramsDetail: {}, billPay: 0, noticeSubject: "", noticeContent: "", noticeIdx: "", calendarSales: null, calendarDiscountSales: null, cate_name: "", cateIdx: "", itemPrice: 0, itemPriceDiscount: 0, itemContent: "", masks: { input: "YYYY-MM-DD" }, itemName: "", queryCate: null, quest: { subject: "", contents: "", cate: "", price: "", intellect: "", smt_idx: "", effort: "", health: "", etiquette: "", start_day: "", end_day: "", type: "" }, confirm: {}, idx: "", slide: 0, sliding: null } }, computed: r(r({}, Object(o.f)(["LOGIN", "STATE_TEACHER_SUE"])), Object(o.d)(["LOGIN_TEACHER"])), watch: { "$route.query.cate": { handler: function (t) { console.log(t), this.params.type = "sueList", t && (console.log("====================="), this.params.type = "sueList", this.params.queryCate = t, this.queryCate = t, this.params = this.LOGIN_TEACHER, this.ACTIONS_TEACHER(this.params)) }, immediate: !0 } }, beforeCreate: function () { }, mounted: function () { var t = this; console.log(this.$nuxt, this.$config), this.params = this.LOGIN_TEACHER, this.$nextTick((function () { t.params.type = "sueList", t.params.queryCate = null, t.ACTIONS_TEACHER(t.params) })) }, beforeDestroy: function () { console.log(this.params.type) }, methods: r(r(r({}, Object(o.c)(["POST_AXIOS", "ACTIONS_TEACHER"])), Object(o.e)(["LOADING_INIT", "LOADING_TRUE"])), {}, { onSlideStart: function (t) { this.sliding = !0 }, onSlideEnd: function (t) { this.sliding = !1 }, onSubmit: function (t) { var e = this; this.LOADING_TRUE(); var n = new FormData; n.append("type", "sueList"), n.append("idx", this.idx), n.append("status", t), this.$axios.post("http://localhost:3095/teacher.php", n, { header: { "Context-Type": "multipart/form-data" } }).then((function (t) { console.log(t), setTimeout((function () { e.params = e.LOGIN_TEACHER, e.params.type = "sueList", e.ACTIONS_TEACHER(e.params), e.$bvModal.hide("itemInsert"), e.LOADING_INIT() })) })).catch((function (t) { console.log("AXIOS FALSE", t) })) }, onSubmitList: function (t, e) { var n = this; this.LOADING_TRUE(); var l = new FormData; l.append("type", "sueList"), l.append("idx", e), l.append("status", t), this.$axios.post("http://localhost:3095/teacher.php", l, { header: { "Context-Type": "multipart/form-data" } }).then((function (t) { console.log(t), setTimeout((function () { n.params = n.LOGIN_TEACHER, n.params.type = "sueList", n.ACTIONS_TEACHER(n.params), n.$bvModal.hide("itemInsert"), n.LOADING_INIT() })) })).catch((function (t) { console.log("AXIOS FALSE", t) })) }, onSubmitBill: function () { var t = this; this.LOADING_TRUE(); var e = new FormData; console.log(this.idx), e.append("type", "billListStudentSue"), e.append("sueIdx", this.idx), e.append("billStudent", this.STATE_TEACHER_SUE.detail.rule_pay), e.append("sms_idx", this.STATE_TEACHER_SUE.detail.sms_idx_to), e.append("smt_idx", this.LOGIN_TEACHER.smt_idx), e.append("billSubject", "규칙위반"), e.append("billContent", this.STATE_TEACHER_SUE.detail.new_subject), 0 === this.billPay ? e.append("billPay", this.STATE_TEACHER_SUE.detail.rule_pay) : e.append("billPay", this.billPay), console.log("FORM_DATA", e), this.$axios.post("http://localhost:3095/teacher.php", e, { header: { "Context-Type": "multipart/form-data" } }).then((function (e) { console.log(e), setTimeout((function () { alert("고지서가 발송되었습니다."), t.$bvModal.hide("itemInsert"), t.params = t.LOGIN_TEACHER, t.$nextTick((function () { t.params.type = "sueList", t.$route.query.cate ? t.params.queryCate = t.$route.query.cate : t.params.queryCate = null, t.ACTIONS_TEACHER(t.params) })) })) })).catch((function (t) { console.log("AXIOS FALSE", t) })) }, onClickCategory: function (t) { var e = this; t ? this.$router.push("/sue-list?cate=".concat(t)) : (this.queryCate = null, this.$router.push("/sue-list"), this.$nextTick((function () { e.params.type = "sueList", e.params.queryCate = null, e.ACTIONS_TEACHER(e.params) }))) }, onClickItemDetail: function (t) { var e = this; this.billPay = 0, this.idx = t, this.params.idx = t, this.params = this.LOGIN_TEACHER, this.params.type = "sueList", this.ACTIONS_TEACHER(this.params), setTimeout((function () { e.$bvModal.show("itemInsert") })) }, payComma: function (t) { t.target.value = this.comma(this.uncomma(t.target.value)), this.billPay = this.uncomma(t.target.value) }, comma: function (t) { return (t = String(t)).replace(/(\d)(?=(?:\d{3})+(?!\d))/g, "$1,") }, uncomma: function (t) { return (t = String(t)).replace(/[^\d]+/g, "") }, resetInput: function (t) { t.target.value = "" } }) }, d = n(84), component = Object(d.a)(_, (function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", [n("div", {}, [t.LOGIN_TEACHER ? n("h4", { staticClass: "is_active" }, [t._v("신고관리")]) : t._e(), t._v(" "), n("div", { staticStyle: { "padding-top": "0vh" }, attrs: { id: "jellyAdminheader" } }, [n("div", { staticClass: "m-t-5" }, [n("span", { staticClass: "spanBox m-r-2", class: t.queryCate ? "" : "is_active", on: { click: function (e) { return t.onClickCategory("") } } }, [t._v("신고접수")]), t._v(" "), n("span", { staticClass: "spanBox m-r-2", class: "5" === t.queryCate ? "is_active" : "", on: { click: function (e) { return t.onClickCategory("5") } } }, [t._v("완료 처리")]), t._v(" "), n("span", { staticClass: "spanBox m-r-2", class: "1" === t.queryCate ? "is_active" : "", on: { click: function (e) { return t.onClickCategory("1") } } }, [t._v("고지서 발송")]), t._v(" "), n("span", { staticClass: "spanBox m-r-2", class: "2" === t.queryCate ? "is_active" : "", on: { click: function (e) { return t.onClickCategory("2") } } }, [t._v("벌칙 처리")]), t._v(" "), n("span", { staticClass: "spanBox m-r-2", class: "3" === t.queryCate ? "is_active" : "", on: { click: function (e) { return t.onClickCategory("3") } } }, [t._v("취소")])]), t._v(" "), n("div", { staticClass: "student form" }, [n("div", { staticClass: "student__list" }, [n("div", { staticClass: "m-t-3" }, [t.STATE_TEACHER_SUE && t.STATE_TEACHER_SUE.sue ? n("table", { staticClass: "jelly-table" }, [n("col", { attrs: { width: "80" } }), t._v(" "), n("col", { attrs: { width: "100" } }), t._v(" "), n("col", { attrs: { width: "*" } }), t._v(" "), n("col", { attrs: { width: "110" } }), t._v(" "), n("col", { attrs: { width: "100" } }), t._v(" "), n("col", { attrs: { width: "240" } }), t._v(" "), t._m(0), t._v(" "), t._l(t.STATE_TEACHER_SUE.sue, (function (e, i) { return n("tr", { key: i }, [n("td", [t._v(t._s(e.sms_name))]), t._v(" "), n("td", [t._v(t._s(e.sms_name_to))]), t._v(" "), n("td", [t._v(t._s(e.new_subject))]), t._v(" "), n("td", { staticClass: "text-center" }, [t._v("\n                  " + t._s(t._f("moment")(e.sue_date, "YY.MM.DD")) + "\n                ")]), t._v(" "), n("td", { staticClass: "text-center" }, [t._v("\n                  " + t._s("0" === e.status_bill ? "미발송" : "발송") + "\n                ")]), t._v(" "), n("td", [n("button", { staticClass: "jelly-btn jelly-btn--default", on: { click: function (n) { return t.onClickItemDetail(e.idx) } } }, [t._v("\n                    자세히 보기\n                  ")]), t._v(" "), t.$route.query.cate ? t._e() : n("button", { staticClass: "jelly-btn jelly-btn--default", on: { click: function (n) { return t.onSubmitList(5, e.idx) } } }, [t._v("\n                    완료처리\n                  ")])])]) }))], 2) : t._e()])])])])]), t._v(" "), n("b-modal", { attrs: { id: "itemInsert", size: "lg", "hide-footer": "", "hide-header": "" } }, [t.STATE_TEACHER_SUE.detail ? n("div", [n("div", { staticClass: "m-t-5 flex" }, [n("div", { staticClass: "flex-full m-r-1" }, [n("p", { staticClass: "bold" }, [t._v("신고자")]), t._v("\n          " + t._s(t.STATE_TEACHER_SUE.detail.sms_name) + "\n        ")]), t._v(" "), n("div", { staticClass: "flex-full m-l-1" }, [n("p", { staticClass: "bold" }, [t._v("신고 대상")]), t._v("\n          " + t._s(t.STATE_TEACHER_SUE.detail.sms_name_to) + "\n        ")]), t._v(" "), n("div", { staticClass: "flex-full m-l-1" }, [n("p", { staticClass: "bold" }, [t._v("사건 발생일")]), t._v("\n          " + t._s(t.STATE_TEACHER_SUE.detail.sue_date) + "\n        ")]), t._v(" "), Number(t.STATE_TEACHER_SUE.detail.rule_pay) > 0 ? n("div", { staticClass: "flex-full m-l-1" }, [n("p", { staticClass: "bold" }, [t._v("벌금")]), t._v(" "), n("em", [t._v(t._s(t._f("comma")(Number(t.STATE_TEACHER_SUE.detail.rule_pay))))])]) : t._e()]), t._v(" "), n("div", { staticClass: "m-t-5" }, [n("p", { staticClass: "bold" }, [t._v("잘못한 일")]), t._v(" "), n("div", { staticClass: "flex-full m-r-1" }, [t._v("\n          " + t._s(t.STATE_TEACHER_SUE.detail.new_subject) + "\n        ")])]), t._v(" "), t.STATE_TEACHER_SUE.detail.evidence ? n("div", { staticClass: "m-t-8" }, [n("p", { staticClass: "bold" }, [t._v("증인 또는 증거")]), t._v(" "), n("div", { staticClass: "flex-full m-r-1" }, [t._v("\n          " + t._s(t.STATE_TEACHER_SUE.detail.evidence) + "\n        ")])]) : t._e(), t._v(" "), n("div", { staticClass: "m-t-8" }, [n("p", { staticClass: "bold" }, [t._v("상세 내용")]), t._v(" "), n("div", { staticClass: "flex-full m-r-1" }, [t._v("\n          " + t._s(t.STATE_TEACHER_SUE.detail.content) + "\n        ")])]), t._v(" "), n("div", { staticClass: "m-t-8" }, [n("p", { staticClass: "bold" }, [t._v("벌금 고지서 발송")]), t._v(" "), Number(t.STATE_TEACHER_SUE.detail.rule_pay) > 0 && "0" === t.STATE_TEACHER_SUE.detail.status_bill ? n("div", { staticClass: "flex-full m-r-1" }, [n("input", { staticClass: "jelly-text text-right", staticStyle: { width: "120px" }, attrs: { type: "text", refs: "refsBillPay" }, domProps: { value: t.STATE_TEACHER_SUE.detail.rule_pay }, on: { input: function (e) { return t.payComma(e) } } }), t._v(" "), t.LOGIN_TEACHER ? n("span", [t._v("\n            " + t._s(t.LOGIN_TEACHER.reg_pay_unit) + "\n          ")]) : t._e(), t._v(" "), n("button", { staticClass: "jelly-btn jelly-btn--pink m-l-2", on: { click: t.onSubmitBill } }, [t._v("\n            고지서 발송\n          ")])]) : n("div", ["0" === t.STATE_TEACHER_SUE.detail.status_bill ? n("em", [t._v("벌금이 지정되지 않았습니다")]) : n("em", [t._v("고지서가 이미 발송되었습니다.")])]), t._v(" "), t.STATE_TEACHER_SUE.photo ? n("div", { staticClass: "m-t-8" }, [n("p", { staticClass: "bold" }, [t._v("증거사진")]), t._v(" "), n("div", [n("b-carousel", { staticStyle: { "text-shadow": "1px 1px 2px #333" }, attrs: { id: "carousel-1", interval: 4e3, controls: "", indicators: "", background: "#ababab", "img-width": "1024", "img-height": "480" }, on: { "sliding-start": t.onSlideStart, "sliding-end": t.onSlideEnd }, model: { value: t.slide, callback: function (e) { t.slide = e }, expression: "slide" } }, t._l(t.STATE_TEACHER_SUE.photo, (function (t, i) { return n("b-carousel-slide", { key: i, attrs: { "img-src": "https://api.school-os.net/data/student/sue/" + t.file_name } }) })), 1)], 1)]) : t._e()]), t._v(" "), n("div", { staticClass: "m-t-8 text-center" }, [n("button", { staticClass: "jelly-btn jelly-btn--default", on: { click: function (e) { return t.$bvModal.hide("itemInsert") } } }, [t._v("\n          닫기\n        ")]), t._v(" "), n("button", { staticClass: "jelly-btn jelly-btn--default", on: { click: function (e) { return t.onSubmit(4) } } }, [t._v("\n          벌칙처리\n        ")]), t._v(" "), n("button", { staticClass: "jelly-btn jelly-btn--default", on: { click: function (e) { return t.onSubmit(5) } } }, [t._v("\n          완료처리\n        ")]), t._v(" "), n("button", { staticClass: "jelly-btn jelly-btn--default", on: { click: function (e) { return t.onSubmit(3) } } }, [t._v("\n          취소하기\n        ")])])]) : t._e()])], 1) }), [function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("tr", [n("th", [t._v("신고자")]), t._v(" "), n("th", [t._v("신고대상")]), t._v(" "), n("th", [t._v("제목")]), t._v(" "), n("th", [t._v("사건 발생일")]), t._v(" "), n("th", [t._v("고지서")]), t._v(" "), n("th", [t._v("관리")])]) }], !1, null, null, null); e.default = component.exports } }]);